var Ge=Object.defineProperty;var Ke=(n,t,e)=>t in n?Ge(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var m=(n,t,e)=>(Ke(n,typeof t!="symbol"?t+"":t,e),e);import{r as Ee,c as Te,d as se,a as h,b as x,F as k,o as g,e as l,n as q,u as s,f as B,_ as re,g as ve,w as Fe,h as Re,T as Oe,p as de,i as Ae,j as Ve,t as U,P as Xe,k as qe,l as Qe,m as pe}from"./index-d3d0f685.js";const me=360,xe=840,Z=150,je=5,C=1400,ze=300,Ze=20,Je=50,$e=5,M=60,Le=60,be=80,te=4,Y=110,P=20,Ie=85,et=20,ue=250,D=80,ce=40,ne=20,L=70,J=30,oe=20,ee=J+L/2,tt=1e4,Me=20,Pe=700;var v=(n=>(n.DEFAULT="default view",n.ALLIES="allies view",n))(v||{}),p=(n=>(n.EMPTY="empty",n.ENEMY_TURN="enemy_turn",n.PLAYER_TURN_DEFAULT="default",n.PLAYER_TURN_SKILL_PENDING="skill pending",n.PLAYER_ULT_PENDING="ult pending",n))(p||{}),S=(n=>(n[n.PLAYER=0]="PLAYER",n[n.ENEMY=1]="ENEMY",n))(S||{}),W=(n=>(n.MELEE="melee",n.RANGED="ranged",n))(W||{}),N=(n=>(n.ATTACK="attacking",n.SKILL="using skill",n.ULT="ulting",n))(N||{}),u=(n=>(n.SINGLE_ALLY="single ally",n.ALL_ALLIES="all allies",n.SINGLE_ENEMY="single enemy",n.SPLASH_ENEMY="splash enemy",n.ALL_ENEMIES="all enemies",n.RANDOM_ENEMY="random enemy",n))(u||{}),w=(n=>(n[n.DAMAGE=0]="DAMAGE",n[n.HEAL=1]="HEAL",n[n.SHIELD=2]="SHIELD",n))(w||{}),f=(n=>(n.FIRE="fire",n.ICE="ice",n.LIGHTNING="lightning",n.WIND="wind",n.QUANTUM="quantum",n.IMAGINARY="imaginary",n.PHYSICAL="physical",n))(f||{});class Ue{constructor(t,e,r,i,o,E,T,A,d){m(this,"type");m(this,"element");m(this,"name");m(this,"avatar");m(this,"maxHp");m(this,"hp");m(this,"attack");m(this,"speed");m(this,"reactionFunction");m(this,"turnEndFunction");this.type=t,this.element=e,this.name=r,this.avatar=i,this.maxHp=o,this.hp=o,this.attack=E,this.speed=T,this.reactionFunction=A,this.turnEndFunction=d}isAlive(){return this.hp>0}reaction(t){return this.reactionFunction?this.reactionFunction(t,this):null}turnEnd(){this.turnEndFunction&&this.turnEndFunction(this)}}class Ne extends Ue{constructor(e,r,i,o,E,T,A,d,c,y,_,le,G,fe,b){super(0,r,e,o,A,d,y,fe,b);m(this,"skill");m(this,"energy");m(this,"maxEnergy");m(this,"ult");m(this,"backImage");m(this,"frontImage");m(this,"shield");m(this,"passiveCount");m(this,"passiveMax");m(this,"attackType");this.skill=c,this.attackType=i,this.backImage=E,this.frontImage=T,this.energy=_*.7,this.maxEnergy=_,this.ult=le,this.element=r,this.passiveCount=G,this.shield=10,this.passiveMax=G}}class ie extends Ue{constructor(e,r,i,o,E,T,A,d){super(1,r,e,i,o,E,T);m(this,"weakness");m(this,"toughness");m(this,"maxToughness");this.weakness=A,this.maxToughness=d,this.toughness=d}}var $=(n=>(n[n.ATTACK=0]="ATTACK",n[n.SKILL=1]="SKILL",n))($||{}),X=(n=>(n[n.REACTION=0]="REACTION",n[n.ULT=1]="ULT",n))(X||{});const at="/assets/bailu-avatar-ea7ff1dc.png",nt="/assets/bailu-back-e4579737.png",st="/assets/bailu-front-848b4178.png",rt="/assets/march-avatar-6f189af8.png",it="/assets/march-back-81ff190d.png",lt="/assets/march-front-185ad5c2.png",ct="/assets/stelle-avatar-ed9a169e.png",ot="/assets/stelle-back-2febe7de.png",ut="/assets/stelle-front-9b6b041a.png",gt=new Ne("main-character",f.PHYSICAL,W.MELEE,ct,ot,ut,100,10,{targetType:u.SPLASH_ENEMY,effect:w.DAMAGE,attackType:W.MELEE,modifier:1.2,breakEfficiency:2},120,100,{targetType:u.RANDOM_ENEMY,hits:3,effect:w.DAMAGE,attackType:W.RANGED,modifier:2,breakEfficiency:1}),ht=new Ne("bailu",f.LIGHTNING,W.MELEE,at,nt,st,100,10,{targetType:u.SINGLE_ALLY,effect:w.HEAL,modifier:10},110,100,{targetType:u.ALL_ALLIES,hits:3,effect:w.HEAL,modifier:20}),mt=new Ne("march",f.ICE,W.RANGED,rt,it,lt,100,10,{targetType:u.SINGLE_ALLY,effect:w.SHIELD,modifier:20},130,100,{targetType:u.ALL_ENEMIES,effect:w.DAMAGE,attackType:W.RANGED,modifier:2,breakEfficiency:2},2,(n,t)=>{if(n==="hit-shield"){const e=t;if(e.passiveCount&&e.passiveCount>0)return e.passiveCount-=1,{type:X.REACTION,character:t,damage:5}}return null},n=>{n.passiveCount=2}),yt="data:image/png;base64,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",Et="data:image/png;base64,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",we="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAIAAAAiOjnJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAGdYAABnWARjRyu0AAAepSURBVHhe7dVRjuwoDIXh2dm8zuJnTz3oOmMhAsZJOKlU5//UDyljCIQj9V8/gADBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBggTBgsQ8WH//8+/2hNe4fukECx0EC+uVGydYWI9gYT1LFcHCSh6pO4JVkK2X8Iv+cLAI3G9SbtMu1B+uuBqs6zvAE9RXueROr/4rrDeE71Vf4q3BCl4Wj+L56htcdZWpYBXx++qd4bvUd7fwHg8EK37lwj3hNs2tLbzBbLCK6VubXeLh9ve18PqOBWv64kzPk9n+v/oIGd1jrj34gWAVyRev3eJtvnTbh9gZu8e04mj0qMPBit/qo6v2d4/v2u05dsbRMX101HDUsWAV8bvr0bjzIWyTz9/nOX664IzThnMOB6uId1CPLt/uWg/f3hXTo1lD/bcNLHIyWME+9qNx/0c8cEvX2aGmR/OG+uHPyEpnglX4nrq6o/GUO412YvX93zb8PEf36W1Nf2buUSeDVcS76Y425/mI7h6s2N3bqP4pvtXkrvb99XNRPy90PlhFvKfmAKZbvM3+7Zn9ZHrUbA/5bYz6m0q3Z4mrwYq3NWqYTlRo3nhoD5/asP9tpZlRf1Dfnla7FKyiu93aqMHq8dyFmhedePXNu124vaP1Ja4Gq5juz87cbRvV12recvqlpydO2cr+t1VnplPODS2xIFhFZot2kn3nqL5Ks/jFdy3fp+0nv6z3x1OCnmBooTXBKpIbHZ2qW7xuv+z1tyzZp20sv5T3T6fEPZkVllgZrGbHJ45n9WDiUc1S+cWDzvwiezb30PT8lGlbcp0llgWraPY9PYY17HumE5P26ySXnW4guU5tumbD+jNTMp3JpRZaGayi2X3mPNazbxvV85q5ydXybdvTTHJBY82H+rengaMLrrI4WEVzhvyprLM7fV+fOjHFJGdl1ree5IJFvjmzcqZHZ32wiuYwh044avb6fqgr2dYYzeq+N35Fd0qXdR5q3n4MHFpQRBWs5lQnjupTmll1vRlywVCgO8uK3dW6xWLU35VstrZpZ3K1G0iCVXRPaMXuUCDo99W6f1tTTnfKdKlmaNrvkp1r2+6kClYxOqp/he5o17n+7UdCt9+K3SFXj8adztqCTm8Ieky+837CYBXBmU98kfyUQ8sW+35/13Qpa5h2WkPcFo86XyfT/CnaYBXB+f3rjBpG4v6jC+6bvZJZZ/o6awh6pg0m2fYQ8mAV08/hnyxuqwX9+UWKZpH6Z36doLNesGFDQYPJ9DzQHcEqpt/FP5//bQOhbnNybtHMrX/mFymONvvfVurJ9DzZTcEqMp/Je+zBf8aazsyUop5SnFjBNUt1WU/c5j1x21e4L1hF5pPtv6xX6uKej8Ztrm4bPeeNZpW6/22lnUzP17k1WEXy840+tNfj0e33WN02ej7kxCx717nXPd/dwTLJrxl/dxsd/W1NA95Qd2YmjiTnWluy+at9JlhF/uMevYZpszfUK9fP58TTbf2Lr/giHwtWcehD55vjNlunWa35mVdPHK1wevGv9slgFfbR89890xksaENNQ/OzaH6O7NfZnv5nDfv6G3w4WObQ18/c1mh0P7f7s64EunO3H7ufb/OIYBV2DYduIpiSXKeebs91Jdbt9Ep+nd/qKcEyJ+7DpjSzMuvUPc2zPdSsoR5qfhpv2w+9zbOCVZy7lf11xot4sz14sz/UvKFuizvxuGCZ0zfkE+MVRj37n97jQ15pWL079EIPDVZx5ZJs4mi6jzYNdaU72jzUrL879E7PDVZx5bZ8bjN9VC+8sh/1ymjI/7bq6z06WObKnflcm14/N7zYbbBKd8gFQy/0BcEydqknLs8n+t82UPF6t8Er+yHXnfhmXxMsY/d39Ap9ymh6PWoV58XuqAmGXuvLguXsLvPXWXc2s3yppl54sTtqgqE3+9ZgObvX6e0GDcF0L8Zztx+ofH2wnN1xcM3d0WCWF7ujxWgiit8TLGf33b31bmVfLLzebbDivg73C4Pl/PrrBDTP9c+aDXVHg1lwvzlYzlPif163h0bT5kZ17L0iWLVpOLoN3SICrwuWCSKyDxCROuG9wcpkhUid9tJgFUFobIhIXfHeYBVNejxPdRHnvDpYRR0m8rTQ24MFEYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFCYIFgZ+f/wA2FuMC2Zk/AgAAAABJRU5ErkJggg==",Tt=new ie("frostspawn",f.ICE,we,50,6,90,[f.FIRE,f.WIND],1),dt=new ie("frostspawn2",f.ICE,we,50,8,90,[f.FIRE,f.WIND],1),At=new ie("fireshadewalker",f.FIRE,yt,100,15,100,[f.ICE,f.WIND,f.IMAGINARY],2),ft=new ie("frostspawn4",f.ICE,we,50,7,90,[f.FIRE,f.WIND],1),pt=new ie("flameSpawn",f.FIRE,Et,50,5,90,[f.ICE,f.PHYSICAL],1),I=n=>new Promise(t=>setTimeout(t,n));function _e(n){return n=Math.floor(n),Math.floor(Math.random()*n)}function ye(n){const t=[];for(let e=0;e<n;e+=1)t.push(e);return t}function V(n){switch(n){case f.FIRE:return"rgb(227,43,41)";case f.ICE:return"rgb(42,146,211)";case f.LIGHTNING:return"rgb(186,81,219)";case f.WIND:return"rgb(97,200,150)";case f.QUANTUM:return"rgb(85,73,188)";case f.IMAGINARY:return"rgb(245,223,50)";case f.PHYSICAL:return"rgb(197,197,197)";default:return"white"}}function De(n,t){return n.type===S.ENEMY?t.enemies.findIndex(e=>e.name===n.name):t.playerCharacters.findIndex(e=>e.name===n.name)}class ae{static enemyAttackAnimation(t,e,r){a.attackingEnemy=t,setTimeout(()=>{a.attackingEnemy=null,Se(r,S.PLAYER,0,e)},C/2)}static resolveDamageOnPlayer(t,e){const r=[],i=a.playerCharacters[t];let o=0;return a.playerCharacters.forEach(E=>{if(E.reaction&&i.shield>0){const T=E.reaction("hit-shield");T!=null&&r.push(T)}}),e>i.shield?(o=e-i.shield,i.shield=0):i.shield-=e,i.hp-=o,i.energy=Math.min(i.energy+$e,i.maxEnergy),r}static resolveDamageOnEnemy(t,e,r,i){const o=a.enemies[t];if(o&&(o.hp-=e,Se(e,S.ENEMY,t,r),o.weakness.includes(r)&&o.toughness!=0&&(o.toughness-=i??1,o.toughness<=0))){o.hp-=Ze,Se(e,S.ENEMY,t,r,!0);const E=a.queue.findIndex(T=>{var A;return((A=T.character)==null?void 0:A.name)===o.name});if(E===-1){console.log("impossible, no enemy turn on timeline");return}a.queue[E].timeUntil+=Je,Q.sortTimeline()}}static async resolveEnemyMove(){const t=a.turnCharacter;t.toughness<=0&&(t.toughness=t.maxToughness);const e=t.attack,r=_e(a.playerCharacters.length);return a.cameraState.focus=r,this.enemyAttackAnimation(De(t,a),t.element,e),await I(C),this.resolveDamageOnPlayer(r,e)}static async resolvePlayerSkill(){const t=a.turnCharacter;if(a.turnState.stateEnum=p.PLAYER_TURN_DEFAULT,t.skill.effect===w.DAMAGE){const e=t.attack*t.skill.modifier,r=a.focusedTarget.mainTarget;switch(t.skill.targetType){case u.SINGLE_ENEMY:{a.playerAttackTarget=r,a.playerTurnAction=N.SKILL,await I(C),this.resolveDamageOnEnemy(r,e,t.element,t.skill.breakEfficiency);break}case u.SPLASH_ENEMY:{a.playerAttackTarget=r,a.playerTurnAction=N.SKILL,await I(C),this.resolveDamageOnEnemy(r,e,t.element,t.skill.breakEfficiency),r>0&&this.resolveDamageOnEnemy(r-1,e,t.element,t.skill.breakEfficiency),r<a.enemies.length-1&&this.resolveDamageOnEnemy(r+1,e,t.element,t.skill.breakEfficiency);break}case u.ALL_ENEMIES:{a.playerAttackTarget=r,a.playerTurnAction=N.SKILL,await I(C);for(let i=0;i<a.enemies.length;i+=1)this.resolveDamageOnEnemy(i,e,t.element,t.skill.breakEfficiency);break}case u.RANDOM_ENEMY:{await I(C);for(let i=0;i<(t.skill.hits??1);i+=1){const o=_e(a.enemies.length);this.resolveDamageOnEnemy(o,e,t.element,t.skill.breakEfficiency)}}}}else if(t.skill.effect===w.HEAL)switch(t.skill.targetType){case u.SINGLE_ALLY:{const e=a.focusedTarget.mainTarget,r=a.playerCharacters[e].hp;Ye(Math.min(a.playerCharacters[e].maxHp-a.playerCharacters[e].hp,t.skill.modifier),S.PLAYER,e),a.playerCharacters[e].hp=Math.min(r+t.skill.modifier,a.playerCharacters[e].maxHp);break}case u.ALL_ALLIES:a.playerCharacters.forEach(e=>e.hp=Math.min(e.maxHp,e.hp+t.skill.modifier))}else if(t.skill.effect===w.SHIELD)switch(t.skill.targetType){case u.SINGLE_ALLY:{const e=a.focusedTarget.mainTarget;a.playerCharacters[e].shield+=t.skill.modifier;break}case u.ALL_ALLIES:a.playerCharacters.forEach(e=>e.shield+=t.skill.modifier)}a.playerAttackTarget=null,a.playerTurnAction=null,await I(C),t.energy=Math.min(t.energy+30,t.maxEnergy),a.cameraState.mode=v.DEFAULT,a.focusedTarget.targetType=u.SINGLE_ENEMY}static async resolvePlayerAttack(){const t=a.turnCharacter;await I(200),a.playerAttackTarget=a.focusedTarget.mainTarget,a.playerTurnAction=N.ATTACK,await I(C),t.energy=Math.min(t.energy+et,t.maxEnergy);const e=t.attack,r=a.focusedTarget.mainTarget;this.resolveDamageOnEnemy(r,e,t.element,1),await I(C),a.playerAttackTarget=null,a.playerTurnAction=null}static async resolvePlayerUlt(){const t=a.turnCharacter;if(t.ult.effect===w.DAMAGE){const e=t.attack*t.ult.modifier,r=a.focusedTarget.mainTarget;switch(t.ult.targetType){case u.SINGLE_ENEMY:{a.playerAttackTarget=r,a.playerTurnAction=N.ULT,await I(C),this.resolveDamageOnEnemy(r,e,t.element,t.ult.breakEfficiency);break}case u.SPLASH_ENEMY:{a.playerAttackTarget=r,a.playerTurnAction=N.ULT,await I(C),this.resolveDamageOnEnemy(r,e,t.element,t.ult.breakEfficiency),r>0&&this.resolveDamageOnEnemy(r-1,e,t.element,t.ult.breakEfficiency),r<a.enemies.length-1&&this.resolveDamageOnEnemy(r+1,e,t.element,t.ult.breakEfficiency);break}case u.ALL_ENEMIES:{a.playerAttackTarget=r,a.playerTurnAction=N.ULT,await I(C),a.enemies.forEach((i,o)=>{this.resolveDamageOnEnemy(o,e,t.element,t.ult.breakEfficiency)});break}case u.RANDOM_ENEMY:{await I(C);for(let i=0;i<(t.ult.hits??1);i+=1){const o=_e(a.enemies.length);await I(ze),this.resolveDamageOnEnemy(o,e,t.element,t.ult.breakEfficiency)}}}}else if(t.ult.effect===w.HEAL)switch(t.ult.targetType){case u.SINGLE_ALLY:{const e=a.focusedTarget.mainTarget,r=a.playerCharacters[e].hp;Ye(Math.min(a.playerCharacters[e].maxHp-a.playerCharacters[e].hp,t.skill.modifier),S.PLAYER,e),a.playerCharacters[e].hp=Math.min(r+t.skill.modifier,a.playerCharacters[e].maxHp);break}case u.ALL_ALLIES:a.playerCharacters.forEach((e,r)=>{Ye(Math.min(a.playerCharacters[r].maxHp-a.playerCharacters[r].hp,t.skill.modifier),S.PLAYER,r),e.hp=Math.min(e.maxHp,e.hp+t.skill.modifier)})}else if(t.skill.effect===w.SHIELD)switch(t.skill.targetType){case u.SINGLE_ALLY:{const e=a.focusedTarget.mainTarget;a.playerCharacters[e].shield+=t.skill.modifier;break}case u.ALL_ALLIES:a.playerCharacters.forEach(e=>e.shield+=t.skill.modifier)}a.playerAttackTarget=null,a.playerTurnAction=null,await I(C),t.energy+=5,a.cameraState.mode=v.DEFAULT,a.focusedTarget.targetType=u.SINGLE_ENEMY}}class Lt{static async resolveTurn(t){a.currentTurn=t,a.focusedTarget.targetType=u.SINGLE_ENEMY,a.focusedTarget.mainTarget=Math.min(a.focusedTarget.mainTarget,a.enemies.length-1),a.currentResolvingSubTurn=null;let e=-1;if(!t.character)return;if(t.character.type===S.ENEMY)if(a.ultSignaled!=null)a.queue.unshift(t),a.currentTurn={character:void 0,index:a.ultSignaled,timeUntil:0,subTurns:[{type:X.ULT,character:a.playerCharacters[a.ultSignaled]}]},a.turnCharacter=null,a.ultSignaled=null,a.playerInput=null;else{const i=t.character;a.turnState={resolvingSubTurn:!1,stateEnum:p.ENEMY_TURN},a.turnCharacter=i,e=t.index;const o=await ae.resolveEnemyMove();a.currentTurn.subTurns.push(...o)}else{const i=t.character;a.cameraState.focus=t.index,a.turnCharacter=i,a.turnState.stateEnum=p.PLAYER_TURN_DEFAULT;let o=!1;for(;!o;){if(a.ultSignaled!=null){a.queue.unshift(t),a.currentTurn={character:void 0,index:a.ultSignaled,timeUntil:0,subTurns:[{type:X.ULT,character:a.playerCharacters[a.ultSignaled]}]},a.turnCharacter=null,a.ultSignaled=null,a.playerInput=null;break}if(a.playerInput!=null){switch(a.playerInput.type){case $.ATTACK:{if(a.turnState.stateEnum===p.PLAYER_TURN_DEFAULT){a.skillPoints=Math.min(a.skillPoints+1,je),await ae.resolvePlayerAttack(),o=!0;break}a.turnState.stateEnum===p.PLAYER_TURN_SKILL_PENDING&&(a.turnState.stateEnum=p.PLAYER_TURN_DEFAULT,a.cameraState.mode=v.DEFAULT,a.cameraState.focus=t.index,a.focusedTarget.targetType=u.SINGLE_ENEMY);break}case $.SKILL:{if(a.turnState.stateEnum===p.PLAYER_TURN_SKILL_PENDING){a.skillPoints-=1,await ae.resolvePlayerSkill(),o=!0;break}a.turnState.stateEnum===p.PLAYER_TURN_DEFAULT&&(a.turnState.stateEnum=p.PLAYER_TURN_SKILL_PENDING,a.focusedTarget.targetType=i.skill.targetType,(i.skill.targetType===u.SINGLE_ALLY||i.skill.targetType===u.ALL_ALLIES)&&(a.focusedTarget.mainTarget=a.currentTurn.index),(i.skill.targetType===u.ALL_ALLIES||i.skill.targetType===u.SINGLE_ALLY)&&(a.cameraState.mode=v.ALLIES,a.cameraState.focus=t.index));break}}a.playerInput=null}await I(200)}}if(!a.currentTurn)return;a.turnCharacter&&(a.turnCharacter.turnEnd(),Q.enqueue(a.turnCharacter,t.index)),a.turnCharacter=null;let r=null;for(;a.currentTurn.subTurns.length>0&&(a.currentTurn.subTurns.sort((i,o)=>i.type===o.type?0:i.type===X.REACTION?-1:1),r=a.currentTurn.subTurns.shift(),!!r);){if(a.currentResolvingSubTurn=r,a.turnCharacter=r.character,r.type===X.REACTION){a.cameraState.focus=De(a.turnCharacter,a),a.focusedTarget.mainTarget=e;const i=a.turnCharacter;a.turnState.resolvingSubTurn=!0,r.damage&&e!==-1&&(a.playerAttackTarget=e,a.playerTurnAction=N.ATTACK,await I(1e3),ae.resolveDamageOnEnemy(e,r.damage,i.element,1),await I(C-1e3))}if(r.type===X.ULT){a.turnState.stateEnum=p.PLAYER_ULT_PENDING;let i=!1;const o=a.turnCharacter;for(a.cameraState.focus=a.playerCharacters.findIndex(E=>E.name===o.name),(o.ult.targetType===u.ALL_ALLIES||o.ult.targetType===u.SINGLE_ALLY)&&(a.cameraState.mode=v.ALLIES,a.cameraState.focus=t.index),a.focusedTarget.targetType=o.ult.targetType;!i;)a.playerInput!=null&&a.playerInput.type===$.ATTACK&&(i=!0,a.playerInput=null,await ae.resolvePlayerUlt()),await I(200)}}}}class Q{static sortTimeline(){a.queue.sort((t,e)=>t.timeUntil-e.timeUntil)}static enqueue(t,e){a.queue.push({character:t,index:e,timeUntil:tt/t.speed,subTurns:[]})}static getNextTurn(){const t=a.queue.shift();if(a.queue.forEach(e=>e.timeUntil-=(t==null?void 0:t.timeUntil)??0),t)return t.timeUntil=0,t}static ult(t){var r;if(t>a.playerCharacters.length)return;const e=a.playerCharacters[t];e.energy===e.maxEnergy&&(e.energy=0,a.turnState.stateEnum===p.PLAYER_TURN_DEFAULT||a.turnState.stateEnum===p.PLAYER_TURN_SKILL_PENDING?a.ultSignaled=t:(r=a.currentTurn)==null||r.subTurns.push({type:X.ULT,character:a.playerCharacters[t]}))}}class It{constructor(t,e){m(this,"cameraState");m(this,"turnState",{stateEnum:p.EMPTY,resolvingSubTurn:!1});m(this,"turnCharacter",null);m(this,"queue");m(this,"attackingEnemy",null);m(this,"playerAttackTarget",null);m(this,"playerTurnAction",null);m(this,"playerCharacters");m(this,"enemies");m(this,"skillPoints");m(this,"playerInput",null);m(this,"focusedTarget",{mainTarget:0,targetType:u.SINGLE_ENEMY});m(this,"currentTurn",null);m(this,"currentResolvingSubTurn",null);m(this,"ultSignaled",null);m(this,"gameOver",!1);this.cameraState={mode:v.DEFAULT,focus:0},this.queue=[],this.playerCharacters=t,this.enemies=e,this.skillPoints=3}async initGame(){for(this.playerCharacters.forEach((t,e)=>Q.enqueue(t,e)),this.enemies.forEach((t,e)=>Q.enqueue(t,e)),Q.sortTimeline();!this.gameOver;){const t=Q.getNextTurn();if(!t){console.log("no more turns??");return}await Lt.resolveTurn(t),a.enemies=a.enemies.filter(e=>e.isAlive()),a.playerCharacters=a.playerCharacters.filter(e=>e.isAlive()),a.queue=a.queue.filter(e=>{var r;return(r=e.character)==null?void 0:r.isAlive()}),a.enemies.length===0&&(this.gameOver=!0)}}}let Ce=0,ke=0;const ge=Ee(new Map),he=Ee(new Map);function Se(n,t,e,r,i){Ce+=1;const o={damage:n,x:t===S.ENEMY?Be.value[e]+L/2:Z+D/2,y:t===S.ENEMY?i?ee+10:ee:ne*3,type:r};ge.set(Ce,o);const E=Ce;setTimeout(()=>{const T=ge.get(E);T&&(T.y-=Me)}),setTimeout(()=>{ge.delete(E)},Pe)}function Ye(n,t,e,r){ke+=1;const i={heal:n,x:t===S.ENEMY?Be.value[e]+L/2:He.value[e]+D/2,y:t===S.ENEMY?r?ee+10:ee:ne*3};he.set(ke,i);const o=ke;setTimeout(()=>{const E=he.get(o);E&&(E.y-=Me)}),setTimeout(()=>{he.delete(o)},Pe)}const _t=Te(()=>{const n=a.focusedTarget.mainTarget;switch(a.focusedTarget.targetType){case u.SINGLE_ALLY:return{main:[a.focusedTarget.mainTarget],sub:[]};case u.ALL_ALLIES:return{main:ye(a.playerCharacters.length),sub:[]};case u.SINGLE_ENEMY:return{main:[n],sub:[]};case u.SPLASH_ENEMY:{const t={main:[n],sub:[]};return n-1>=0&&t.sub.push(n-1),n+1<a.enemies.length&&t.sub.push(n+1),t}case u.ALL_ENEMIES:case u.RANDOM_ENEMY:return{main:ye(a.enemies.length),sub:[]};default:return{main:[],sub:[]}}}),He=Te(()=>{const e=(xe-200-a.playerCharacters.length*(D+ce)-ce)/2,r=[];for(let i=0;i<a.playerCharacters.length;i++)r.push(200+e+ce+i*(D+ce));return r}),Be=Te(()=>{const n=xe-(a.enemies.length*(L+oe)+oe*2),t=[];for(let e=0;e<a.enemies.length;e++)t.push(n+oe+e*(L+oe));return t}),a=Ee(new It([gt,ht,mt],[pt,dt,At,ft,Tt]));function Ct(n){Q.ult(n)}function kt(){return{gameState:a,enemyXPositions:Be,playerXPositions:He,targetMarkers:_t,healNumbers:he,damageNumbers:ge,activateUlt:Ct}}const St=["data-index"],Yt=["href","height","width","x","y"],xt=["x"],Nt=["x","width"],wt=["x","y"],Bt=["x","y","width"],vt=["cx","cy","r"],bt=se({__name:"EnemyView",props:{enemies:null,enemyXPositions:null,attackingEnemy:null},setup(n){const t=n,e=48,r=20,i=6,o=4,E=Te(()=>t.attackingEnemy==null?"":`translate(${Z-t.enemyXPositions[t.attackingEnemy]}px, ${me/2-J-L}px)`);return(T,A)=>(g(!0),h(k,null,x(n.enemies,(d,c)=>(g(),h("g",{class:"enemy-ui",key:d.name+d.hp,"data-index":c},[l("image",{class:"enemy-image",style:q({transform:n.attackingEnemy!=null&&c===n.attackingEnemy?s(E):""}),href:d.avatar,height:n.attackingEnemy!=null&&c===n.attackingEnemy?s(L)*1.5:s(L),width:n.attackingEnemy!=null&&c===n.attackingEnemy?s(L)*1.5:s(L),x:n.enemyXPositions[c],y:s(J)},null,12,Yt),l("rect",{class:"health-bar-outline",x:n.enemyXPositions[c]+(s(L)-e)/2,y:r,width:e,height:i},null,8,xt),l("rect",{class:"health-bar",x:n.enemyXPositions[c]+(s(L)-e)/2,y:r,width:d.hp/d.maxHp*e,height:i},null,8,Nt),l("rect",{class:"toughness-bar-outline",x:n.enemyXPositions[c]+(s(L)-e)/2,y:r-o,width:e,height:o},null,8,wt),d.toughness>0?(g(),h("rect",{key:0,class:"toughness-bar",x:n.enemyXPositions[c]+(s(L)-e)/2,y:r-o,width:d.toughness/d.maxToughness*e,height:o},null,8,Bt)):B("",!0),(g(!0),h(k,null,x(d.weakness,(y,_)=>(g(),h("circle",{class:"weakness-icon",key:y,cx:n.enemyXPositions[c]-_*10+60,cy:r-8,r:3.5,style:q({"--color":s(V)(y)})},null,12,vt))),128))],8,St))),128))}});const Ft=re(bt,[["__scopeId","data-v-bf53a0b5"]]),Rt=n=>(de("data-v-cc42b8ab"),n=n(),Ae(),n),Mt=Rt(()=>l("defs",null,[l("filter",{id:"glow"},[l("feGaussianBlur",{stdDeviation:"4",result:"coloredBlur"}),l("feMerge",null,[l("feMergeNode",{in:"coloredBlur"}),l("feMergeNode",{in:"SourceGraphic"})])])],-1)),Pt={key:0},Ut=["href","height","width","x","y"],Dt=["fill"],Ht=["href","height","width","x"],Wt={key:0},Gt=["cx","cy"],Kt=["cx","cy","fill"],Ot=["x","y","width","height"],Vt=["x","y","width","height"],Xt={key:0},qt=["x1","y1","y2","x2"],Qt=["x1","y1","y2","x2"],jt=["x1","y1","y2","x2"],zt=["id"],Zt=["offset","stop-color"],Jt=["offset","stop-color"],$t=["stop-color"],ea=["data-index"],ta=["cx","cy"],aa=["cx","cy","fill","filter"],na=["x","y"],sa=["data-index"],ra=["href","height","width","x","y"],ia=se({__name:"PlayerView",props:{playerCharacters:null,cameraState:null,playerXPositions:null,enemyXPositions:null,playerAttackMainTarget:null,playerTurnAction:null},setup(n){const t=n,e=280,r=.75,i=2;let o=0;const E=ve([]),T=ve("");return Fe(()=>t.playerAttackMainTarget,()=>{if(t.playerAttackMainTarget==null){E.value=[];return}else{const A=t.playerCharacters[t.cameraState.focus],d=t.playerTurnAction===N.ATTACK?u.SINGLE_ENEMY:t.playerTurnAction===N.SKILL?A.skill.targetType:A.ult.targetType,c=t.playerTurnAction===N.ATTACK?A.attackType:t.playerTurnAction===N.SKILL?A.skill.attackType:A.ult.attackType;if(!c||d===u.ALL_ALLIES||d===u.SINGLE_ALLY)return;switch(c){case W.MELEE:{const y=t.enemyXPositions[t.playerAttackMainTarget]-Z,_=J-Xe/3;T.value=`translate(${y}px, ${_}px)`,setTimeout(()=>{T.value=""},C);break}case W.RANGED:switch(d){case u.SINGLE_ENEMY:{o+=1;const y={x:Z+D,y:me/2,color:V(A.element),id:o};E.value=[y],setTimeout(()=>{if(t.playerAttackMainTarget==null){console.log("ah shit target lost");return}E.value[0].x=t.enemyXPositions[t.playerAttackMainTarget]+L/2,E.value[0].y=J+L/2},300),setTimeout(()=>{E.value=[]},1100);break}case u.SPLASH_ENEMY:case u.ALL_ENEMIES:{for(let y=0;y<t.enemyXPositions.length;y+=1){o+=1;const _={x:Z+D,y:me/2,color:V(A.element),id:o};E.value.push(_),setTimeout(()=>{E.value[y].x=t.enemyXPositions[y]+L/2,E.value[y].y=J+L/2},300-y*50)}setTimeout(()=>{E.value=[]},1100);break}case u.RANDOM_ENEMY:}}}}),(A,d)=>(g(),h(k,null,[Mt,l("g",null,[n.cameraState.mode===s(v).DEFAULT?(g(),h("g",Pt,[l("image",{class:"player-default-image",style:q({transform:T.value}),href:n.playerCharacters[n.cameraState.focus].backImage,height:T.value===""?s(ue):s(ue)*.8,width:T.value===""?s(D):s(D)*.8,x:s(Z),y:s(ne)},null,12,Ut)])):B("",!0),E.value.length>0?(g(),Re(Oe,{key:1,to:"#projectile-teleport-target"},[(g(!0),h(k,null,x(E.value,c=>(g(),h("circle",{class:"projectile",key:c.id,style:q({transform:`translate(${c.x}px, ${c.y}px)`}),r:8,fill:c.color},null,12,Dt))),128))])):B("",!0),(g(!0),h(k,null,x(n.playerCharacters,(c,y)=>(g(),h("g",{class:"player-ui",key:c.name+c.hp},[l("image",{href:c.avatar,height:s(M),width:s(Le),x:s(P)+y*s(Y),y:e},null,8,Ht),c.passiveMax&&c.passiveCount!==void 0?(g(),h("g",Wt,[(g(!0),h(k,null,x(s(ye)(c.passiveMax),_=>(g(),h("circle",{class:"depleted",key:_,cx:s(P)+y*s(Y)+5+(i*2+2)*_,cy:e+s(M)+10,r:i},null,8,Gt))),128)),(g(!0),h(k,null,x(s(ye)(c.passiveCount),_=>(g(),h("circle",{class:"active",key:_,cx:s(P)+y*s(Y)+5+(i*2+2)*_,cy:e+s(M)+10,r:i,fill:s(V)(c.element)},null,8,Kt))),128))])):B("",!0),l("g",{class:"bar",style:q({transform:`translate(0, ${r*2}px)`})},[l("rect",{class:"health-bar-outline",x:s(P)+y*s(Y),y:e+s(M),width:s(be),height:s(te)},null,8,Ot),l("rect",{class:"health-bar",x:s(P)+y*s(Y),y:e+s(M),width:c.hp/c.maxHp*s(be),height:s(te)},null,8,Vt),c.shield>0?(g(),h("g",Xt,[l("line",{class:"shield-bar",x1:s(P)+y*s(Y)-r,y1:e+s(M)-r*2,y2:e+s(M)+s(te)+r*2,x2:s(P)+y*s(Y)-r},null,8,qt),l("line",{class:"shield-bar",x1:s(P)+y*s(Y)-r,y1:e+s(M)-r,y2:e+s(M)-r,x2:s(P)+y*s(Y)+c.shield/c.maxHp*s(Le)},null,8,Qt),l("line",{class:"shield-bar",x1:s(P)+y*s(Y)-r,y1:e+s(M)+s(te)+r,y2:e+s(M)+s(te)+r,x2:s(P)+y*s(Y)+c.shield/c.maxHp*s(Le)},null,8,jt)])):B("",!0)],4),l("linearGradient",{id:c.name+"energy-gradient",x1:"0.5",y1:"1",x2:"0.5",y2:"0"},[l("stop",{offset:`${c.energy/c.maxEnergy*100}%`,"stop-opacity":"1","stop-color":s(V)(c.element)},null,8,Zt),l("stop",{offset:`${c.energy/c.maxEnergy*100}%`,"stop-opacity":"0","stop-color":s(V)(c.element)},null,8,Jt),l("stop",{offset:"100%","stop-opacity":"0","stop-color":s(V)(c.element)},null,8,$t)],8,zt),l("g",{class:Ve(["ult-circle",{ready:c.energy===c.maxEnergy}]),"data-index":y},[l("circle",{cx:s(Ie)+y*s(Y),cy:e+30,r:"22",fill:"black"},null,8,ta),l("circle",{cx:s(Ie)+y*s(Y),cy:e+30,r:"22",fill:`url(#${c.name}energy-gradient)`,filter:c.energy===c.maxEnergy?"url(#glow)":""},null,8,aa)],10,ea),l("text",{class:"hp-number-display",x:s(Ie)+y*s(Y),y:e+58},U(c.hp),9,na)]))),128)),n.cameraState.mode===s(v).ALLIES?(g(!0),h(k,{key:2},x(n.playerCharacters,(c,y)=>(g(),h("g",{class:"player-image",key:c.name+c.hp+"ally","data-index":y},[l("image",{href:c.frontImage,height:s(ue),width:s(D),x:n.playerXPositions[y],y:s(ne)},null,8,ra)],8,sa))),128)):B("",!0)])],64))}});const la=re(ia,[["__scopeId","data-v-cc42b8ab"]]),H=n=>(de("data-v-8446a208"),n=n(),Ae(),n),ca={key:0,class:"target-crosshair"},oa=["transform"],ua=H(()=>l("circle",{fill:"transparent",stroke:"rgb(255, 8, 0)",r:"20"},null,-1)),ga=H(()=>l("line",{x1:"10",y1:"00",x2:"20",y2:"0",stroke:"rgb(255, 8, 0)"},null,-1)),ha=H(()=>l("line",{x1:"-20",y1:"00",x2:"-10",y2:"0",stroke:"rgb(255, 8, 0)"},null,-1)),ma=H(()=>l("line",{x1:"0",y1:"-20",x2:"0",y2:"-10",stroke:"rgb(255, 8, 0)"},null,-1)),ya=H(()=>l("line",{x1:"0",y1:"10",x2:"0",y2:"20",stroke:"rgb(255, 8, 0)"},null,-1)),Ea=[ua,ga,ha,ma,ya],Ta=["transform"],da=H(()=>l("circle",{fill:"transparent",stroke:"rgb(255, 8, 0)",r:"10"},null,-1)),Aa=H(()=>l("line",{x1:"10",y1:"00",x2:"20",y2:"0",stroke:"rgb(255, 8, 0)"},null,-1)),fa=H(()=>l("line",{x1:"-20",y1:"00",x2:"-10",y2:"0",stroke:"rgb(255, 8, 0)"},null,-1)),pa=H(()=>l("line",{x1:"0",y1:"-20",x2:"0",y2:"-10",stroke:"rgb(255, 8, 0)"},null,-1)),La=H(()=>l("line",{x1:"0",y1:"10",x2:"0",y2:"20",stroke:"rgb(255, 8, 0)"},null,-1)),Ia=[da,Aa,fa,pa,La],_a=se({__name:"TargetMarkerComponent",props:{turnCharacter:null,cameraState:null,targetMarkers:null,playerXPositions:null,enemyXPositions:null},setup(n){return(t,e)=>{var r;return((r=n.turnCharacter)==null?void 0:r.type)===s(S).PLAYER?(g(),h("g",ca,[(g(!0),h(k,null,x(n.targetMarkers.main,i=>(g(),h("g",{key:i,transform:`translate(${n.cameraState.mode===s(v).ALLIES?n.playerXPositions[i]+s(D)/2:n.enemyXPositions[i]+s(L)/2}, ${n.cameraState.mode===s(v).ALLIES?s(ne)+s(ue)/2:s(ee)})`},Ea,8,oa))),128)),(g(!0),h(k,null,x(n.targetMarkers.sub,i=>(g(),h("g",{key:i,transform:`translate(${n.enemyXPositions[i]+s(L)/2}, ${s(ee)})`},Ia,8,Ta))),128))])):B("",!0)}}});const Ca=re(_a,[["__scopeId","data-v-8446a208"]]),We=n=>(de("data-v-5c6c5798"),n=n(),Ae(),n),ka={class:"timeline"},Sa={class:"current-turn"},Ya={key:0},xa=We(()=>l("rect",{height:"20",width:"40",stroke:"white",fill:"grey",x:"20",y:10},null,-1)),Na=["href"],wa=["x"],Ba=["href","x"],va={key:0,class:"current-subturn"},ba=We(()=>l("rect",{height:"20",width:"40",stroke:"white",fill:"grey",x:"20",y:10},null,-1)),Fa=["href"],Ra=["y"],Ma=["href","y"],Pa=se({__name:"TimelineComponent",props:{currentTurn:null,currentResolvingSubTurn:null,queue:null},setup(n){return(t,e)=>{var r,i,o,E;return g(),h("g",ka,[l("g",Sa,[(r=n.currentTurn)!=null&&r.character?(g(),h("g",Ya,[xa,l("image",{href:(i=n.currentTurn.character)==null?void 0:i.avatar,height:"20",width:"20",x:"30",y:10},null,8,Na)])):B("",!0),(g(!0),h(k,null,x((o=n.currentTurn)==null?void 0:o.subTurns,(T,A)=>(g(),h("g",{key:T.character.name+T.type},[l("rect",{height:"20",width:"40",stroke:"white",fill:"grey",x:60+40*A,y:10},null,8,wa),l("image",{href:T.character.avatar,height:"20",width:"20",x:70+40*A,y:10},null,8,Ba)]))),128))]),n.currentResolvingSubTurn?(g(),h("g",va,[ba,l("image",{href:(E=n.currentResolvingSubTurn.character)==null?void 0:E.avatar,height:"20",width:"20",x:"30",y:10},null,8,Fa)])):B("",!0),(g(!0),h(k,null,x(n.queue,(T,A)=>{var d,c;return g(),h("g",{key:((d=T.character)==null?void 0:d.name)??""+T.timeUntil},[l("rect",{height:"20",width:"40",stroke:"white",fill:"grey",x:"20",y:A*30+40},null,8,Ra),l("image",{href:(c=T.character)==null?void 0:c.avatar,height:"20",width:"20",x:"30",y:A*30+40},null,8,Ma)])}),128))])}}});const Ua=re(Pa,[["__scopeId","data-v-5c6c5798"]]),j=n=>(de("data-v-2bfa3d91"),n=n(),Ae(),n),Da={class:"col mt-2 d-flex justify-content-center"},Ha={class:"skill-points-container"},Wa={key:0,class:"no-skill-point-tip"},Ga={key:0,class:"action-buttons d-flex justify-content-center align-items-center"},Ka=j(()=>l("div",{class:"material-icons-outlined"},"sports_cricket",-1)),Oa=[Ka],Va=j(()=>l("div",{class:"material-icons-outlined"},U("close"),-1)),Xa=[Va],qa=["height","width"],Qa=["height","width"],ja=j(()=>l("g",{id:"projectile-teleport-target"},null,-1)),za={class:"damage-numbers"},Za=["fill"],Ja={class:"heal-numbers"},$a={class:"col mt-2"},en={class:"row justify-content-center d-flex"},tn=j(()=>l("div",null,"Turn Character:",-1)),an=j(()=>l("div",null,"|",-1)),nn=j(()=>l("div",null,"Turn state:",-1)),sn={class:"row justify-content-center d-flex"},rn=j(()=>l("div",null,"Focused Target:",-1)),ln=se({__name:"StarRailView",setup(n){const t={width:xe,height:me},{gameState:e,enemyXPositions:r,playerXPositions:i,targetMarkers:o,healNumbers:E,damageNumbers:T,activateUlt:A}=kt();function d(){e.turnState.stateEnum!==p.ENEMY_TURN&&(e.playerInput={type:$.ATTACK})}let c=0;function y(){if(e.skillPoints===0){clearTimeout(c),G.show0SkillPoint=!0,c=setTimeout(()=>{G.show0SkillPoint=!1},2e3);return}e.turnState.stateEnum!==p.ENEMY_TURN&&(e.playerInput={type:$.SKILL})}function _(b){switch(b.key){case"a":{const F=e.focusedTarget.mainTarget;e.focusedTarget.mainTarget=Math.max(F-1,0);break}case"d":{if(e.cameraState.mode===v.ALLIES){const K=e.focusedTarget.mainTarget;e.focusedTarget.mainTarget=Math.min(K+1,e.playerCharacters.length-1);return}const F=e.focusedTarget.mainTarget;e.focusedTarget.mainTarget=Math.min(F+1,e.enemies.length-1);break}case" ":{b.preventDefault(),d();break}case"f":{e.playerCharacters.map(F=>F.hp-=10);break}case"e":{y();break}case"1":case"2":case"3":case"4":{const F=parseInt(b.key)-1;A(F);break}case"p":e.queue.shift()}}function le(b){if(!(b.target instanceof Element))return;const F=b.target.closest(".ult-circle");F&&A(parseInt(F.dataset.index??""));const K=b.target.closest(".enemy-ui");if(K){const R=parseInt(K.dataset.index??"");console.log(R,e.focusedTarget.mainTarget),e.focusedTarget.mainTarget===R&&(e.turnState.stateEnum===p.PLAYER_TURN_SKILL_PENDING?y():e.turnState.stateEnum===p.PLAYER_TURN_DEFAULT&&d()),e.focusedTarget.mainTarget=parseInt(K.dataset.index??"")}const z=b.target.closest(".player-image");if(z){const R=parseInt(z.dataset.index??"");e.focusedTarget.mainTarget===R&&(e.turnState.stateEnum===p.PLAYER_TURN_SKILL_PENDING?y():e.turnState.stateEnum===p.PLAYER_TURN_DEFAULT&&d()),e.focusedTarget.mainTarget=parseInt(z.dataset.index??"")}}const G=Ee({show0SkillPoint:!1,showWinMessage:!1,showLoseMessage:!1});Fe(e,()=>{e.gameOver&&(e.enemies.length===0?G.showWinMessage=!0:G.showLoseMessage=!0)}),qe(()=>{e.initGame(),document.addEventListener("keypress",_)}),Qe(()=>{document.removeEventListener("keypress",_)});function fe(){console.log(e)}return(b,F)=>{var K,z;return g(),h("main",null,[l("div",Da,[l("div",{class:"game-viewport",style:q({"--width":t.width,"--height":t.height})},[l("div",Ha,[G.show0SkillPoint?(g(),h("div",Wa," Not enough skill points ")):B("",!0),(g(!0),h(k,null,x([...Array(5).keys()],R=>(g(),h("span",{key:R,class:"material-icons-outlined"},U(R<s(e).skillPoints?"star":"star_outline"),1))),128))]),((K=s(e).turnCharacter)==null?void 0:K.type)===s(S).PLAYER?(g(),h("div",Ga,[l("button",{onClick:d,class:"attack-button d-flex justify-content-center align-items-center"},Oa),s(e).turnState.stateEnum!=s(p).PLAYER_ULT_PENDING?(g(),h("button",{key:0,onClick:y,class:"skill-button d-flex justify-content-center align-items-center"},Xa)):B("",!0)])):B("",!0),(g(),h("svg",{class:"game-svg",height:t.height,onTouchend:le,onMouseup:le,width:t.width},[l("rect",{class:"background",height:t.height+10,width:t.width},null,8,Qa),s(e).cameraState.mode===s(v).DEFAULT?(g(),Re(Ft,{key:0,"attacking-enemy":s(e).attackingEnemy,enemies:s(e).enemies,"enemy-x-positions":s(r)},null,8,["attacking-enemy","enemies","enemy-x-positions"])):B("",!0),pe(la,{"player-characters":s(e).playerCharacters,"camera-state":s(e).cameraState,"player-x-positions":s(i),"enemy-x-positions":s(r),"player-turn-action":s(e).playerTurnAction,"player-attack-main-target":s(e).playerAttackTarget},null,8,["player-characters","camera-state","player-x-positions","enemy-x-positions","player-turn-action","player-attack-main-target"]),pe(Ua,{queue:s(e).queue,"current-resolving-sub-turn":s(e).currentResolvingSubTurn,"current-turn":s(e).currentTurn},null,8,["queue","current-resolving-sub-turn","current-turn"]),pe(Ca,{"camera-state":s(e).cameraState,"turn-character":s(e).turnCharacter,"player-x-positions":s(i),"enemy-x-positions":s(r),"target-markers":s(o)},null,8,["camera-state","turn-character","player-x-positions","enemy-x-positions","target-markers"]),ja,l("g",za,[(g(!0),h(k,null,x(s(T),([R,O])=>(g(),h("text",{key:R,fill:s(V)(O.type),style:q({transform:`translate(${O.x}px, ${O.y}px)`})},U(O.damage),13,Za))),128))]),l("g",Ja,[(g(!0),h(k,null,x(s(E),([R,O])=>(g(),h("text",{key:R,fill:"rgb(177,250,73)",style:q({transform:`translate(${O.x}px, ${O.y}px)`})}," +"+U(O.heal),5))),128))])],40,qa))],4)]),l("div",$a,[l("div",{class:"row justify-content-center d-flex"},[l("button",{onClick:fe,style:{width:"130px",height:"30px"}},"Print Console")]),l("div",en,[tn,l("div",null,U((z=s(e).turnCharacter)==null?void 0:z.name),1),an,nn,l("div",null,U(s(e).turnState.stateEnum),1)]),l("div",sn,[rn,l("div",null,U(s(e).focusedTarget.mainTarget),1),l("div",null,U(s(e).focusedTarget.targetType),1),l("div",null,U(s(o)),1)])])])}}});const un=re(ln,[["__scopeId","data-v-2bfa3d91"]]);export{un as default};
